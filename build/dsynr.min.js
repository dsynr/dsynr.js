class DsynrUIIElement{constructor(t,e){this.selfAbort=!1,this.prefAttr="dsynr-pref",d.lfn("DsynrUIIElement"),this.content=t;let s=this;DsynrUIIElement.instances.length>0&&DsynrUIIElement.instances.forEach(function(e,n){if(e.content===t)return s.selfAbort=!0,void console.log("already instantiated, aborting...")}),this.selfAbort||(this.preferences=e,this.setPref(),this.setParent(),DsynrUIIElement.instances.push(this),console.log(DsynrUIIElement.instances))}setPref(){if(d.lfn("setPref"),Object.keys(this.preferences).length>0)console.log("Object.keys(preferences).length:"+Object.keys(this.preferences).length);else{let t=d.getData(this.content,this.prefAttr);console.log(t),null!==t&&(console.log("parsing preferences : "+t),this.preferences=d.IsJson(t)?JSON.parse(t):d.conf[t])}d.updateProps(this,this.preferences)}setup(){}setParent(){d.lfn("setParent"),console.log(this.parent),void 0===this.parent&&(this.parent="parent"),"string"==typeof this.parent&&(console.log(this.parent),"parent"==this.parent?this.parent=this.content.parentElement:this.parent=d.getElementById(this.parent)),console.log(this.parent)}setDefaults(t=!1){d.lfn("setDefaults super "),this.animate=d.addProp(this,"animate",!0,t),this.animateClass=d.addProp(this,"animateClass",d.conf.ani.prefix,t),this.animateInClass=d.addProp(this,"animateInClass",d.concatStr([this.animateClass,d.conf.ani.styles.fadeIn]),t),this.animateOutClass=d.addProp(this,"animateOutClass",d.concatStr([this.animateClass,d.conf.ani.styles.slideOutUp]),t),this.animateAttentionClass=d.addProp(this,"animateOutClass",d.concatStr([this.animateClass,"heartBeat"]),t)}addListeners(){}setActive(){}attention(){}show(){}hide(){}destroy(){d.lfn("destroy"),this.instance.remove()}setName(t,e){return d.concatStr([this.namePrefix,t,this.nameSuffix],"-")}}DsynrUIIElement.instances=[];class DsynrModal extends DsynrUIIElement{constructor(t,e={}){super(t,e),this.selfAbort||(d.lfn("DsynrModal"),this.setDefaults(),this.setup())}setDefaults(t=!1){d.lfn("setDefaults"),super.setDefaults();this.adoptParent=d.addProp(this,"adoptParent",!0,t),this.animateModal=d.addProp(this,"animateModal",!0,t),this.autoDestroy=d.addProp(this,"autoDestroy",!0,t),this.displayTogether=d.addProp(this,"displayTogether",!0,t),this.useOverlay=d.addProp(this,"useOverlay",!0,t),this.disableUnderlay=d.addProp(this,"disableUnderlay",!0,t),this.respectBounds=d.addProp(this,"respectBounds",!0,t),this.animateUnderlay=d.addProp(this,"animateUnderlay",!0,t),this.nameSuffix=d.addProp(this,"nameSuffix",DsynrModal.instances.length.toString(),t),this.namePrefix=d.addProp(this,"namePrefix","dsynrModal",t),this.modalAnimateInClass=d.addProp(this,"modalAnimateInClass",d.concatStr([this.animateClass,"flipInX"]),t),this.modalAnimateOutClass=d.addProp(this,"modalAnimateOutClass",d.concatStr([this.animateClass,"flipOutY"]),t),this.modalAnimateAttentionClass=d.addProp(this,"modalAnimateAttentionClass",d.concatStr([this.animateClass,"shake"]),t),this.overlayClass=d.addProp(this,"overlayClass","o50 bg-dark",t),this.parentSizingClass=d.addProp(this,"sizingClass","wmax hmax",t),this.windowSizingClass=d.addProp(this,"windowSizingClass","vw vh",t),this.underlayClass=d.addProp(this,"underlayClass",d.concatStr(["position-absolute","top left",this.parentSizingClass,"dsynrModalUnderlay"]),t),this.instanceClass=d.addProp(this,"instanceClass",d.concatStr(["position-absolute","o0 rounded nooverflow","dsynrModalContentRoot"]),t),this.instanceRootClass=d.addProp(this,"instanceRootClass",d.concatStr(["position-absolute","top left",this.parentSizingClass,"o0 d-none","dsynrModal"]),t),this.trigger=d.addProp(this,"trigger","auto",t),this.onModalDestroy=d.addProp(this,"onModalDestroy",()=>{this.hide(this.autoDestroy)},t)}setup(){d.lfn("setup");let t=this;d.addClass(this.content,"d-none"),"auto"!=this.trigger?(console.log("setting trigger to : "+this.trigger),d.addListener(this.trigger,"click",function(){t.show()}),console.log("Modal Trigger READY!")):(console.log("Triggering Automatically..."),this.show())}show(){DsynrModal.activeInstance!==this&&(d.lfn("show via : "+this.trigger),d.addClass(this.content,"o0"),d.removeClass(this.content,"d-none"),void 0===this.parent&&(console.log("parent unavailable, adding modal to body"),this.parent=document.body),this.instanceRoot=d.addDiv(this.setName("root",this.content.id),this.instanceRootClass,this.parent),d.setHighestZindex(this.instanceRoot),this.instance=d.addDiv(this.setName("modal",this.parent.id),this.instanceClass,this.instanceRoot),this.instance.style.zIndex=(parseInt(this.instanceRoot.style.zIndex)-1).toString(),this.disableUnderlay?(this.useOverlay&&(this.underlayClass=d.concatStr([this.underlayClass,this.overlayClass])),this.underlay=d.addDiv(this.setName("underlay",this.content.id),this.underlayClass,this.instanceRoot),this.underlay.style.zIndex=(parseInt(this.instance.style.zIndex)-1).toString()):d.removeClass(this.instanceRoot,this.parentSizingClass),this.addListeners(),this.instance.appendChild(this.content),d.removeClass(this.instanceRoot,"d-none"),d.removeClass(this.instance,"o0"),d.removeClass(this.content,"o0"),console.log(this.parent.id),this.respectBounds&&(this.content.clientHeight>this.parent.clientHeight&&(this.instance.style.height=d.getCssDimension(this.parent.clientHeight-50),this.instance.style.overflowY="auto"),this.content.clientWidth>this.parent.clientWidth&&(this.instance.style.width=d.getCssDimension(this.parent.clientWidth-50),this.instance.style.overflowX="auto")),this.adoptParent&&(this.content.clientHeight>this.parent.clientHeight||this.content.clientWidth>this.parent.clientWidth)&&(d.lfn("adoptParent"),console.log("parent cannot accommodate child, adopting body as parent!"),this.parent=document.body,this.parent.append(this.instanceRoot),this.resizeRoot()),this.align(),this.animateDisplay(),this.setActive())}attention(){d.lfn("attention"),this.animateDisplay(!0)}animateDisplay(t=!1){d.lfn("animateDisplay"),this.displayTogether?(console.log("displayTogether..."),this.animate&&this.animateUnderlay?(console.log("this.animate && this.animateUnderlay...."),t?(console.log("getAttention.."),d.removeClass(this.instanceRoot,this.animateInClass),d.addClass(this.instanceRoot,this.animateAttentionClass),d.removeClass(this.instance,this.modalAnimateInClass),d.addClass(this.instance,this.modalAnimateAttentionClass)):(console.log("NOT getAttention.."),d.addClass(this.instanceRoot,this.animateClass+d.conf.ani.styles.fadeIn),d.addClass(this.instance,this.animateClass+d.conf.ani.styles.fadeIn))):t?console.log("getting Attention....."):(d.removeClass(this.instanceRoot,"o0"),d.removeClass(this.instance,"o0"))):console.log("animate one after other...")}hide(t=this.autoDestroy){d.lfn("hide"),this.useOverlay&&(d.removeClass(this.instanceRoot,this.modalAnimateInClass),d.addClass(this.instanceRoot,this.modalAnimateOutClass)),t&&(console.log("TODO ONANIMATIONEND LISTENER..."),this.destroy()),DsynrModal.activeInstance=!1}resizeRoot(){d.lfn("resizeRoot"),this.parent==document.body?(d.removeClass(this.instanceRoot,this.parentSizingClass),d.addClass(this.instanceRoot,this.windowSizingClass)):(this.instanceRoot.style.width=d.getCssDimension(this.parent.clientWidth),this.instanceRoot.style.height=d.getCssDimension(this.parent.clientHeight))}destroy(){d.lfn("destroying modal.."),this.instanceRoot.remove()}setActive(){d.lfn("setActive"),this.instanceRoot=this.instanceRoot,this.content.focus(),DsynrModal.activeInstance=this}addListeners(){d.lfn("addListeners");let t=this;this.animate&&(console.log("enabling animation"),this.instance.addEventListener(d.transitionEvent,t.modalHidden)),d.addListener(this.instanceRoot.id,"keydown",function(e){"Escape"==e.key&&t.hide(t.autoDestroy)}),d.addListener(this.instanceRoot.id,"click",function(e){console.log(e.target),console.log(e.target.offsetParent),console.log(e.target.classList.value),e.target.classList.value==t.underlayClass&&t.onModalDestroy()})}blanketHidden(t){let e;e=d.getElementById("blanket"),"fadeOut"==t.animationName&&(e.removeEventListener(d.transitionEvent,this.blanketHidden),e.remove())}align(){d.lfn("align"),this.disableUnderlay||d.addClass(this.instanceRoot,this.parentSizingClass),d.centereStage(this.instance),this.disableUnderlay}modalHidden(t){"zoomOut"==t.animationName&&(this.instanceRoot.classList.add("d-none"),this.instanceRoot.classList.remove("zoomOut"),this.instanceRoot.removeEventListener(d.transitionEvent,this.modalHidden))}static auto(t="dsynrModal"){d.lfn("auto"),d.makeArray(d.getElementsByClass(t)).forEach(function(t){new DsynrModal(t)})}}class DsynrSelect extends DsynrUIIElement{constructor(t,e={}){super(t,e),this.selfAbort||(d.lfn("DsynrSelect"),this.setDefaults(),this.setup())}setDefaults(t=!1){super.setDefaults(),d.lfn("setDefaults"),this.adoptParent=d.addProp(this,"adoptParent",!0,t),this.nameSuffix=d.addProp(this,"nameSuffix",DsynrSelect.instances.length.toString(),t),this.namePrefix=d.addProp(this,"namePrefix","dsynrEnhancedSelect",t),this.optionPrefix=d.addProp(this,"namePrefix",d.concatStr([this.namePrefix,"option"],"-"),t),this.instanceClass=d.addProp(this,"instanceClasses",d.concatStr([this.namePrefix,"rounded bg-light shadow p-5"]),t),this.showFinder=d.addProp(this,"showFinder",!1,t),this.autoExit=d.addProp(this,"autoExit",!0,t),this.isActive=d.addProp(this,"isActive",!1,t),this.triggerCls=d.addProp(this,"btnCls",d.concatStr([this.namePrefix,"trigger btn btn-link"],"-"),t),this.optCls=d.addProp(this,"optCls",d.concatStr([this.optionPrefix,"hand p-2"]),t),this.optClsActive=d.addProp(this,"optClsActive","active bg-warning rounded",t)}setup(){d.lfn("setup"),""===this.content.id&&(this.content.id="dsynrSelect-"+DsynrSelect.instances.length),this.options=this.content.options,this.option=this.options[this.options.selectedIndex],this.setTrigger(),console.log("Select Trigger READY!")}show(){if(d.lfn("show triggered via : "+this.trigger.id),this.isActive)this.attention();else{this.instance=d.addDiv(this.setName("",this.content.id),this.instanceClass),this.instance.tabIndex=0,this.instance.style.outline="none";let t=this;d.makeArray(this.options).forEach(function(e,s){t.addESOption(e,s)}),this.modalPref=d.mergeObjs(this.preferences,{trigger:"auto",parent:this.parent,adoptParent:this.adoptParent,onModalDestroy:()=>{t.destroy()}}),this.modal=new DsynrModal(this.instance,this.modalPref),this.setActive()}}attention(){DsynrSelect.activeInstance=this,this.modal.attention()}update(t){d.lfn("update"),d.removeClass(this.esPrevOpt,this.optClsActive),this.option=t,d.addClass(this.option,this.optClsActive),this.esPrevOpt=d.getElementById(t.id),this.content.selectedIndex=parseInt(d.getData(t,"index")),this.trigger.textContent=this.option.innerText,this.autoExit&&this.destroy()}addESOption(t,e){d.lfn("addESOption");let s,n=d.concatStr([this.optionPrefix,this.content.id,e],"-");console.log(this.esPrevOpt),s=e==this.content.selectedIndex?d.concatStr([this.optCls,this.optClsActive]):s=this.optCls;let i=d.addDiv(n,s,this.instance);i.tabIndex=e,i.style.outline="none",e==this.option.index&&(this.esPrevOpt=i);let a=d.getElementById(n);a.textContent=t.text,d.setData(a,"index",t.index.toString());let o=this;d.addListener(a.id,"click",function(){d.lclk(a.id),o.update(a)}),d.addListener(a.id,"keydown",function(t){"Enter"==t.key&&o.update(a)})}setTrigger(){d.lfn("addTrigger"),this.trigger=d.addDiv(this.setName("btn",this.content.id),this.triggerCls,this.content.parentElement),d.addText(this.option.text,this.trigger);let t=this;d.addListener(this.trigger.id,"click",function(e){e.preventDefault(),t.show()}),d.hide(this.content)}addListeners(){d.lfn("d.addListeners...");let t=this;d.addListener(this.instance.id,"focus",t=>{console.log("focused!")}),d.addListener(this.instance.id,"keydown",function(e){switch(e.key){case"ArrowDown":case"ArrowRight":case"Tab":t.next();break;case"ArrowUp":case"ArrowLeft":t.prev();break;case"Escape":t.destroy()}})}next(){d.lfn("next")}prev(){d.lfn("prev")}destroy(){d.lfn("destroy"),this.modal.hide(!0),this.isActive=!1,DsynrSelect.activeInstance=!1}setActive(){d.lfn("setActive"),this.isActive=!0,DsynrSelect.activeInstance=this,this.addListeners(),this.instance.focus()}static auto(t="dsynrSelect"){d.lfn("auto"),d.makeArray(d.getElementsByClass(t)).forEach(function(t){new DsynrSelect(t)})}}class Dsynr{constructor(t={}){this.conf={domain:document.baseURI,defaultParent:document.body,ani:{prefix:"animate__animated animate__",speed:{faster:"animate__faster",default:""},styles:{zoomIn:"zoomIn",fadeIn:"fadeIn",fadeInUp:"fadeInUp",slideInDown:"slideInDown",slideInUp:"slideInUp",slideInLeft:"slideInLeft",slideInRight:"slideInRight",slideOutUp:"slideOutUp",heartBeat:"heartBeat"}}},this.transitionEvent=this.whichAnimationEvent(),this.requestDataset={},this.totalRequestDatasets=0,this.documentScripts=[],this.updateConfig(t),this.updateViewportVars(),this.reqDataReady=new Event("reqDataReady")}updateConfig(t){this.lfn("updateConfig Dsynr...."),this.defaultConf()}defaultConf(){this.lfn("defaultConf"),this.conf.ani.speed.default=this.conf.ani.speed.faster}docReady(t){"complete"==document.readyState&&t()}gtag(t,e,s){}PING(t,e){}getData(t,e){return t.getAttribute("data-"+e)}setData(t,e,s=""){t.setAttribute("data-"+e,s)}debounce(t,e){let s;return e=e||100,function(){clearTimeout(s);let n=arguments,i=this;s=setTimeout(function(){t.apply(i,n)},e)}}concatStr(t,e=" "){return t.join(e)}getPercentage(t,e){return t*e/100}getRandFloor(t=0,e=255){return this.getRandDecimal(t,e,0)}getRandNum(t=0,e=255){return Math.round(this.getRandDecimal(t,e,0))}getRandDecimal(t=0,e=1,s=2){return parseFloat((Math.random()*(e-t)+t).toFixed(s))}getRandomArbitrary(t,e){return Math.random()*(e-t)+t}makeArray(t){return Array.from(t)}getRandArrayItem(t){return t[Math.floor(Math.random()*t.length)]}getRandObjItem(t){let e=Object.keys(t);return t[e[e.length*Math.random()<<0]]}addProp(t,e,s,n=!1){return!n&&t.hasOwnProperty(e)||Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:s}),t[e]}updateProps(t,e){this.lfn("updateProps...");for(let s in e)e.hasOwnProperty(s)&&(t[s]=e[s]),console.log(s+":"+t[s])}mergeObjs(t,e){for(let s in e)t[s]=e[s];return t}hasInstance(t,e){this.lfn("hasInstance"),console.log(t);let s=!1;return t.forEach((t,n)=>{t!==e||(s=!0)}),console.log(s),s}getRandColour(){return"#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6)}getRandColourRGBA(t=1,e=255,s=255,n=255){return"rgba("+this.getRandFloor(0,e)+","+this.getRandFloor(0,s)+","+this.getRandFloor(0,n)+","+this.getRandDecimal(0,t)+")"}getCssDimension(t,e="px"){return t+e}randRadius(){return this.getRandomArbitrary(5,150)}randWidth(){return this.getRandomArbitrary(2,15)}getDimensions(t){return{w:t.clientWidth,h:t.clientHeight}}hide(t){t.style.display="none"}addClass(t,e){t.classList.add(...e.split(" "))}removeClass(t,e){t.classList.remove(...e.split(" "))}hasClass(t,e){return t.classList.contains(e)}addDiv(t="",e="",s=document.body){let n=document.createElement("DIV");return n.id=t,n.className=e,s.appendChild(n),n}addText(t="",e){e.appendChild(document.createTextNode(t))}getElementsBySelector(t){return document.querySelectorAll(t)}getElementsByTag(t){return document.querySelectorAll(t)}getElementsByClass(t){return document.getElementsByClassName(t)}getElementById(t){return window[t]}addJS(t,e=""){let s=document.createElement("script");s.setAttribute("src",t),s.id=e,document.head.appendChild(s)}animateIn(){this.makeArray(this.getElementsByClass("animated")).forEach(t=>{null!==this.getData(t,"ani")&&null!=this.getData(t,"ani")&&this.isInViewportSlightly(t)&&(t.classList.remove("o0"),t.classList.add(t.dataset.ani))})}whichAnimationEvent(){let t,e=document.createElement("fakeelement"),s={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in s)if(void 0!==e.style[t])return s[t]}addListener(t,e,s){void 0!==this.getElementById(t)&&this.getElementById(t).addEventListener(e,s)}removeListener(t,e,s){this.getElementById(t).removeEventListener(e,s)}addEvent(t,e,s){this.makeArray(t).forEach(t=>{t.addEventListener(e,s),console.log(t)})}centereStage(t){let e=this.getDimensions(t);t.style.marginTop=this.getCssDimension(-e.h/2),t.style.marginLeft=this.getCssDimension(-e.w/2),t.style.top="50%",t.style.left="50%"}updateViewportVars(){this.vw=window.innerWidth,this.vh=window.innerHeight}getBounds(t){return t.getBoundingClientRect()}isInViewportSlightly(t){return this.getBounds(t).top>=0}isInViewportMostly(t){let e=this.getBounds(t);return e.top/2>-e.top}serialize(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}ajax(t,e=!1,s=!1,n=!0,i=document.body,a=!1,o="GET"){if(this.lfn("ajax "+t),this.curReq=new XMLHttpRequest,this.curReq){this.curReq.open(o,t,!0),this.setHeaders("POST"==o),this.curReq.send(this.serialize(s));let d=this;this.curReq.addEventListener("readystatechange",function(){return d.stateChanged(d,e,n,i,a)})}else this.failed()}setHeaders(t=!1){t&&this.curReq.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.curReq.setRequestHeader("Cache-Control","no-cache"),this.curReq.setRequestHeader("Powered-by","Dsynr.com")}stateChanged(t,e,s,n=document.body,i=!1){this.lfn("stateChanged");let a=t.curReq;if(a.readyState===XMLHttpRequest.DONE){if(200===a.status)return t.succeeded(e,s,n,i);console.log("Not ready yet :: "+a.status+" / "+a.readyState)}else console.log(a)}failed(){return console.log("Cannot create an XMLHTTP instance"),!1}succeeded(t,e,s=document.body,n=!1){return this.lfn("succeeded!"),this.totalRequestDatasets++,"string"==typeof t&&(console.log("Saving to dataset; Reference key: "+t),this.requestDataset[t]=this.curReq.response),e&&this.addFetchedData(this.curReq.response,s,n),this.curReq.response}addFetchedData(t,e=document.body,s=!1){d.lfn("addFetchedData..");let n=this.addDiv("dsynrFetchedData-"+this.totalRequestDatasets,"d-none",e),i=this;this.addListener(n.id,"reqDataReady",function(){i.showFetchedData(n)}),n.innerHTML=t,console.log("enableDsynrSelect:"+s),s&&DsynrSelect.auto();let a=n.getElementsByTagName("script");for(let t=0;t<a.length;++t){let e=a[t].getAttribute("src");null===e||this.documentScripts.includes(e)||this.addJS(e)}n.dispatchEvent(this.reqDataReady)}showFetchedData(t){this.lfn("showFetchedData"),this.removeClass(t,"d-none"),new DsynrModal(t)}getPageScripts(t){function e(e){for(let s of e.children)s.hasAttribute("src")&&null!=s.getAttribute("src")&&t.documentScripts.push(s.getAttribute("src"))}e(document.head),e(document.body)}IsJson(t){try{JSON.parse(t)}catch(t){return!1}return!0}getAniClass(t){return" "+this.conf.ani.prefix+t}autoPrefixAniClasses(t=this.conf.ani.speed.default){for(const e in this.conf.ani.styles)this.makeArray(this.getElementsByClass(e)).forEach(s=>{this.removeClass(s,e),this.addClass(s,this.conf.ani.prefix+e+" "+t)})}setHighestZindex(t){let e=this.getHighestZindex();e=null==e?3:e+3,t.style.zIndex=e}getHighestZindex(t=document.body){return Array.from(t.querySelectorAll("*")).map(t=>parseFloat(window.getComputedStyle(t).zIndex)).filter(t=>!isNaN(t)).sort((t,e)=>t-e).pop()}xxxl(t,e=!1){if(e){console.log("Logging FormData:");for(let e of t.entries())console.log(e[0]+" : "+e[1])}else console.log(t)}lfn(t){console.log(" {} "+t)}lclk(t){console.log("* click "+t)}}let d=new Dsynr;class DsynrWp{constructor(){this.conf={formURL:"form/"}}ready(){d.lfn("DsynrUtilWp"),d.getPageScripts(d)}getForm(t,e=d.conf.defaultParent,s=!1){d.lfn("getForm"),d.lfn("form parent::"+e),null!=d.requestDataset[t]?(console.log(t+" Previously loaded / Reinstantiating from memory..."),d.addFetchedData(d.requestDataset[t],e,s)):d.ajax(d.conf.domain+this.conf.formURL+t+"?min",t,!1,!0,e,s)}ajax(t={},e=d.conf.defaultParent){d.lfn("ajax / "+name);let s=d.mergeObjs({action:"dw_ajax"},t);console.log(s),d.ajax(ajxRequest.ajaxurl,!1,s,!0,e,"POST")}}let dw=new DsynrWp;